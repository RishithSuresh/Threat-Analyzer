<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Threat Analyzer — dashboard for transaction monitoring, network analysis and risk profiling." />
    <title>Threat Analyzer</title>
    <!-- External libs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js" defer></script>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">
          <div style="width:40px;height:40px;border-radius:8px;background:#00d4ff"></div>
          <h1>Threat Analyzer</h1>
        </div>
        <nav class="nav">
          <button data-view="dashboard" class="active">Dashboard</button>
          <button data-view="transactions">Transaction Monitor</button>
          <button data-view="network">Network Analysis</button>
          <button data-view="risk">Risk Profiling</button>
          <button data-view="patterns">Pattern Analysis</button>
        </nav>
        <div style="margin-top:auto;font-size:12px;color:rgba(255,255,255,0.6)">v1.0.0 • System Active</div>
      </aside>

      <main class="main">
        <!-- Dashboard -->
        <section id="dashboard" class="view">
          <div class="header"><h1>Threat Analyzer Dashboard</h1><p>Real-time Money Laundering Detection & Risk Assessment</p></div>
          <div class="metrics">
            <div class="card"><strong>Active Alerts</strong><div id="activeAlerts" style="font-size:22px;margin-top:8px;color:#ff6b6b">—</div></div>
            <div class="card"><strong>High-Risk Accounts</strong><div id="highRiskAccounts" style="font-size:22px;margin-top:8px;color:#ffa500">—</div></div>
            <div class="card"><strong>Flagged Transactions</strong><div id="flaggedTx" style="font-size:22px;margin-top:8px;color:#9b59b6">—</div></div>
            <div class="card"><strong>Monitored Accounts</strong><div id="monitoredAccounts" style="font-size:22px;margin-top:8px;color:#3498db">—</div></div>
          </div>

          <div class="charts">
            <div class="card">
              <h3>Transaction Volume & Risk Trends</h3>
              <canvas id="lineChart" height="200"></canvas>
            </div>
            <div class="card">
              <h3>Risk Distribution</h3>
              <canvas id="barChart" height="200"></canvas>
            </div>
          </div>

          <div class="card" style="margin-top:16px">
            <h3>Recent Alerts</h3>
            <table class="table">
              <thead><tr><th>Account</th><th>Message</th><th>Amount</th><th>Severity</th></tr></thead>
              <tbody>
                <tr><td>ACC-2024-001</td><td>Rapid fund transfer across jurisdictions</td><td>$125,000</td><td style="color:#ff6b6b">HIGH</td></tr>
                <tr><td>ACC-2024-015</td><td>Multiple small transactions</td><td>$89,500</td><td style="color:#ffa500">MED</td></tr>
                <tr><td>ACC-2024-042</td><td>Shell company payment detected</td><td>$245,000</td><td style="color:#ff6b6b">HIGH</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Transactions -->
        <section id="transactions" class="view" style="display:none">
          <div class="header"><h1>Transaction Monitoring System</h1><p>Real-time analysis of transactions</p></div>
          <div class="card" style="margin-top:12px">
            <h3>Transactions</h3>
              <!-- Upload UI removed per user request -->
              <table class="table" id="txTable">
              <thead><tr><th>ID</th><th>Date</th><th>From</th><th>To</th><th>Amount</th><th>Risk</th><th>Status</th></tr></thead>
              <tbody></tbody>
            </table>
              <div id="analysisResults" style="margin-top:12px">
                <!-- Summary cards will be injected here by app.js -->
                <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px" id="analysisSummary"></div>
                <!-- Graphs removed from Transaction Monitor per user request -->
              </div>
          </div>
        </section>

        <!-- Network -->
        <section id="network" class="view" style="display:none">
          <div class="header"><h1>Network Analysis & Money Trail</h1><p>Interactive spider map showing transaction layers</p></div>
          <div class="network-container card" style="margin-top:12px;padding:12px">
            <div id="networkViz" style="width:100%;height:500px"></div>
          </div>
        </section>

        <!-- Risk -->
        <section id="risk" class="view" style="display:none">
          <div class="header"><h1>Risk-Based Customer Profiling</h1><p>AI-powered risk assessment</p></div>
          <div class="card" style="margin-top:12px">
            <h3>Customer Profiles</h3>
            <div id="riskProfiles" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:12px">
              <!-- Risk profile cards injected here -->
            </div>
          </div>
        </section>

        <!-- Patterns -->
        <section id="patterns" class="view" style="display:none">
          <div class="header"><h1>Pattern Analysis & Behavioral Detection</h1><p>Identification of money laundering patterns</p></div>
          <div class="card" style="margin-top:12px">
            <h3>Detected Patterns</h3>
            <table class="table">
              <thead><tr><th>ID</th><th>Name</th><th>Severity</th><th>Confidence</th></tr></thead>
              <tbody id="patternsBody">
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <script src="app.js" defer></script>
  </body>
</html>
